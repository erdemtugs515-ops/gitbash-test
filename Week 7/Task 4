DELIMITER = ";"

class TIMESTAMP:
    def __init__(self):
        self.weekday = ""
        self.hour = ""
        self.consumption = 0.0
        self.price = 0.0

def readTimestamps(filename):
    timestamps = []
    print(f'Reading file "{filename}".')
    try:
        with open(filename, "r", encoding="utf-8") as file:
            for line in file:
                line = line.strip()
                if not line:
                    continue
                columns = line.split(DELIMITER)
                if len(columns) < 4:
                    continue
                t = TIMESTAMP()
                t.weekday = columns[0]
                t.hour = columns[1]
                t.consumption = float(columns[2])
                t.price = float(columns[3])
                timestamps.append(t)
    except FileNotFoundError:
        print(f'Error: File "{filename}" not found.')
    return timestamps

def displayTimestamps(timestamps):
    total_consumption = 0.0
    total_price = 0.0
    print("Electricity:")
    for t in timestamps:
        total = t.consumption * t.price
        print(f"{t.weekday} {t.hour}: {t.consumption:.2f} kWh, {t.price:.2f} €/kWh, total {total:.2f} €")
        total_consumption += t.consumption
        total_price += total
    print(f"Total consumption: {total_consumption:.2f} kWh")
    print(f"Total cost: {total_price:.2f} €")

def main():
    print("Program starting.")
    filename = input("Insert filename: ")
    timestamps = readTimestamps(filename)
    if timestamps:
        displayTimestamps(timestamps)
    print("Program ending.")

if __name__ == "__main__":
    main()
