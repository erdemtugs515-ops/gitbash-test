LOWERCASE = "abcdefghijklmnopqrstuvwxyz"
UPPERCASE = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"

def writeFile(filename, content):
    if filename == "":
        print("File name not defined.")
        print("Aborting save operation.")
        return
    with open(filename, "w") as file:
        file.write(content)
    print("Ciphered text saved!")

def askRows():
    print("Collecting plain text rows for ciphering.")
    rows = []
    while True:
        try:
            row = input("Insert row(empty stops): ")
        except EOFError:
            break
        if row == "":
            break
        rows.append(row)
    return "\n".join(rows)

def shiftCharacter(character, alphabets, shift=13):
    if character in alphabets:
        index = alphabets.index(character)
        newIndex = (index + shift) % len(alphabets)
        return alphabets[newIndex]
    return character

def rot13(content):
    result = ""
    for ch in content:
        if ch in LOWERCASE:
            result += shiftCharacter(ch, LOWERCASE)
        elif ch in UPPERCASE:
            result += shiftCharacter(ch, UPPERCASE)
        else:
            result += ch
    return result

def main():
    print("Program starting.\n")
    text = askRows()
    ciphered = rot13(text)
    print("\n#### Ciphered text ####")
    print(ciphered)
    print("\n#### Ciphered text ####")
    filename = input("Insert filename to save: ")
    if filename == "":
        print("File name not defined.")
        print("Aborting save operation.")
    else:
        writeFile(filename, ciphered)
    print("Program ending.")

if __name__ == "__main__":
    main()
